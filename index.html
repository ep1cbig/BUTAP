<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BUTAPP - Sebastian Manduca</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Tipograf√≠a de respaldo si no hay internet */
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            margin: 0; padding: 0; 
            overflow: hidden;
            background-color: #f3f4f6;
        }

        /* Pantalla de Presentaci√≥n */
        #intro-screen {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            /* Fondo inspirado en Italia */
            background: linear-gradient(90deg, #008C45 33.3%, #ffffff 33.3%, #ffffff 66.6%, #CD212A 66.6%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .welcome-box {
            background: white;
            padding: 2rem;
            border-radius: 30px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 85%;
            border: 1px solid #f0f0f0;
        }

        /* Bot√≥n Dividido */
        .split-button {
            display: flex;
            background: #1f2937;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            border: 2px solid #1f2937;
        }

        .split-btn-part {
            padding: 15px 25px;
            color: white;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 14px;
            transition: background 0.3s;
            cursor: pointer;
            border: none;
            background: transparent;
        }

        .split-btn-part:active { background: #374151; }
        .divider { width: 2px; background: rgba(255,255,255,0.2); height: 30px; align-self: center; }

        /* Colores de Categor√≠as */
        .theme-organico { border-top: 15px solid #8B4513 !important; } /* Marr√≥n */
        .theme-carta { border-top: 15px solid #00008B !important; }    /* Azul Oscuro */
        .theme-plastica { border-top: 15px solid #FFD700 !important; } /* Amarillo */
        .theme-indifferenziato { border-top: 15px solid #808080 !important; } /* Gris */
        .theme-vetro { border-top: 15px solid #008000 !important; }    /* Verde */
        .theme-none { border-top: 15px solid #e5e7eb !important; }

        .info-card { 
            width: 100%; max-width: 450px; 
            border-radius: 35px; background: white; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            overflow-y: auto; max-height: 60vh;
        }

        .btn-interact:active { transform: scale(0.95); }
        
        /* Ocultar pantalla */
        .hide-intro { transform: translateY(-100%); }
    </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen pt-10 px-4">

    <!-- PANTALLA DE PRESENTACI√ìN -->
    <div id="intro-screen">
        <div class="welcome-box">
            <h1 class="text-4xl font-black text-gray-800 mb-2">BUTAPP</h1>
            <p class="text-gray-500 font-medium italic mb-4 text-sm">Benvenuti / Bienvenidos</p>
            
            <div class="split-button">
                <button onclick="enterApp('es')" class="split-btn-part">Ingresar</button>
                <div class="divider"></div>
                <button onclick="enterApp('it')" class="split-btn-part">Entrare</button>
            </div>
        </div>
        
        <!-- Cr√©ditos en color gris oscuro para visibilidad -->
        <div class="absolute bottom-10 text-center text-gray-700">
            <p class="font-bold text-sm">Creador: Sebastian Manduca</p>
            <p class="text-[10px] uppercase tracking-widest font-black opacity-80">Copyright ¬© 2026</p>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL (App) -->
    <header class="text-center mb-8">
        <h1 class="text-5xl font-black text-green-800 tracking-tighter">BUTAPP</h1>
        <p class="text-[10px] text-green-600 font-bold uppercase tracking-[0.3em]">Eco-Gu√≠a Inteligente</p>
    </header>

    <div id="main-card" class="info-card p-8 mb-6 border-t-[15px]">
        <div class="flex flex-col items-center">
            <div id="waste-icon" class="text-6xl mb-4">‚ôªÔ∏è</div>
            <h2 id="waste-text" class="text-3xl font-black text-center text-gray-800 uppercase leading-none mb-2">Cargando...</h2>
            <p id="date-text" class="text-sm font-bold text-gray-400 mb-6"></p>
        </div>

        <div id="details-container" class="space-y-4">
            <!-- Detalles din√°micos -->
        </div>
    </div>

    <!-- Panel de Control Inferior -->
    <div class="w-full max-w-md bg-white p-6 rounded-[30px] shadow-lg border border-gray-100">
        <div class="flex items-center justify-between mb-6">
            <div>
                <p id="label-today" class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Hoy es:</p>
                <p id="current-day-label" class="text-lg font-bold text-gray-800">Cargando...</p>
            </div>
            <button onclick="speakToday()" class="btn-interact w-14 h-14 bg-green-700 text-white rounded-2xl flex items-center justify-center shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            </button>
        </div>

        <div class="flex gap-2">
            <button onclick="setLanguage('es')" id="btn-es" class="btn-interact flex-1 py-4 rounded-xl font-black text-xs border-2 transition-all">ESPA√ëOL</button>
            <button onclick="setLanguage('it')" id="btn-it" class="btn-interact flex-1 py-4 rounded-xl font-black text-xs border-2 transition-all">ITALIANO</button>
        </div>
    </div>

    <script>
        let currentLang = 'es';

        const translations = {
            es: { 
                speechPrefix: "Atenci√≥n, hoy te toca tirar ", 
                speechNone: "Atenci√≥n, hoy no se tira nada.", 
                none: "Nada hoy",
                si: "QU√â TIRAR üëç",
                no: "NO TIRAR ‚ùå",
                labelToday: "Calendario de Hoy"
            },
            it: { 
                speechPrefix: "Attenzione, oggi devi buttare ", 
                speechNone: "Attenzione, oggi non si butta niente.", 
                none: "Niente oggi",
                si: "COSA BUTTARE üëç",
                no: "NON BUTTARE ‚ùå",
                labelToday: "Calendario di Oggi"
            }
        };

        const themeMap = {
            "Organico": { class: "theme-organico", icon: "üü§", color: "#8B4513" },
            "Carta": { class: "theme-carta", icon: "üîµ", color: "#00008B" },
            "Plastica Metalli": { class: "theme-plastica", icon: "üü°", color: "#EAB308" },
            "Secco Residuo": { class: "theme-indifferenziato", icon: "‚ö™", color: "#808080" },
            "Vetro": { class: "theme-vetro", icon: "üü¢", color: "#008000" },
            "Nada hoy": { class: "theme-none", icon: "üè†", color: "#9ca3af" }
        };

        const detailsData = {
            "Organico": {
                es: { si: "Restos de comida, c√°scaras, caf√©, saquitos de t√©, flores y servilletas sucias.", no: "Pa√±ales, colillas de cigarro o l√≠quidos." },
                it: { si: "Avanzi di cibo, bucce, fondi di caff√®, t√®, fiori e tovaglioli sporchi.", no: "Pannolini, mozziconi di sigaretta o liquidi." }
            },
            "Plastica Metalli": {
                es: { si: "Botellas, latas, bolsas de pl√°stico, papel aluminio y bandejas de telara.", no: "Juguetes grandes, goma o envases con mucha comida." },
                it: { si: "Bottiglie, lattine, sacchetti, carta stagnola e vaschette bianche.", no: "Giocattoli, gomma o contenitori sporchi." }
            },
            "Carta": {
                es: { si: "Cajas de cart√≥n, peri√≥dicos, revistas, bolsas de papel y Tetra Pak.", no: "Tickets de compra, cajas de pizza con grasa o papel mojado." },
                it: { si: "Scatole di cartone, giornali, riviste, sacchetti di carta e Tetra Pak.", no: "Scontrini, scatole di pizza unte o carta bagnata." }
            },
            "Secco Residuo": {
                es: { si: "Tickets, pa√±ales, cepillos de dientes, bol√≠grafos, colillas y cer√°mica rota.", no: "Pilas, bombillas o medicinas." },
                it: { si: "Scontrini, pannolini, spazzolini, penne, mozziconi e ceramica.", no: "Pile, lampadine o medicine." }
            },
            "Vetro": {
                es: { si: "Botellas y frascos de vidrio (¬°Sin las tapas!).", no: "Copas de cristal, platos de cer√°mica o bombillas." },
                it: { si: "Bottiglie e vasetti di vetro (Senza tappi!).", no: "Cristallo, piatti di ceramica o lampadine." }
            }
        };

        const calendar = {
            "0-2": "Secco Residuo / Vetro", "0-3": "Organico", "0-5": "Organico", "0-7": "Carta / Plastica Metalli",
            "0-8": "Organico", "0-9": "Secco Residuo / Vetro", "0-10": "Organico", "0-12": "Organico",
            "0-13": "Carta", "0-14": "Plastica Metalli", "0-15": "Organico", "0-16": "Secco Residuo / Vetro",
            "0-31": "Organico"
        };

        function enterApp(lang) {
            currentLang = lang;
            document.getElementById('intro-screen').classList.add('hide-intro');
            setLanguage(lang);
        }

        function setLanguage(lang) {
            currentLang = lang;
            document.getElementById('btn-es').className = `btn-interact flex-1 py-4 rounded-xl font-black border-2 transition-all ${lang === 'es' ? 'bg-green-700 text-white border-green-700' : 'bg-white text-gray-400 border-gray-100'}`;
            document.getElementById('btn-it').className = `btn-interact flex-1 py-4 rounded-xl font-black border-2 transition-all ${lang === 'it' ? 'bg-green-700 text-white border-green-700' : 'bg-white text-gray-400 border-gray-100'}`;
            updateUI();
        }

        function updateUI() {
            const now = new Date();
            const key = `${now.getMonth()}-${now.getDate()}`;
            const waste = calendar[key] || translations[currentLang].none;
            
            const card = document.getElementById('main-card');
            const wasteText = document.getElementById('waste-text');
            const iconBox = document.getElementById('waste-icon');
            
            // Reset temas
            card.className = "info-card p-8 mb-6 border-t-[15px]";
            
            const mainType = waste.split(' / ')[0];
            const theme = themeMap[mainType] || themeMap["Nada hoy"];
            
            card.classList.add(theme.class);
            iconBox.innerText = theme.icon;
            wasteText.innerText = waste;
            wasteText.style.color = theme.color;
            
            document.getElementById('date-text').innerText = now.toLocaleDateString(currentLang === 'es' ? 'es-ES' : 'it-IT', { weekday: 'long', day: 'numeric', month: 'long' });
            document.getElementById('current-day-label').innerText = now.toLocaleDateString(currentLang === 'es' ? 'es-ES' : 'it-IT', { weekday: 'long' });
            document.getElementById('label-today').innerText = translations[currentLang].labelToday;

            renderDetails(waste);
        }

        function renderDetails(wasteType) {
            const container = document.getElementById('details-container');
            container.innerHTML = "";

            if (wasteType === translations[currentLang].none) {
                container.innerHTML = `<p class="text-center text-gray-400 font-bold py-10 uppercase tracking-widest">Oggi riposo / D√≠a libre</p>`;
                return;
            }

            const types = wasteType.split(' / ');
            types.forEach(type => {
                const data = detailsData[type] ? detailsData[type][currentLang] : null;
                if (data) {
                    container.innerHTML += `
                        <div class="bg-gray-50 p-4 rounded-2xl border border-gray-100">
                            <h4 class="font-black text-[10px] uppercase text-gray-400 mb-2">${type}</h4>
                            <p class="text-[10px] font-black text-green-600 mb-1">${translations[currentLang].si}</p>
                            <p class="text-xs text-gray-700 font-bold leading-tight mb-3">${data.si}</p>
                            <p class="text-[10px] font-black text-red-500 mb-1">${translations[currentLang].no}</p>
                            <p class="text-xs text-gray-700 font-bold leading-tight">${data.no}</p>
                        </div>
                    `;
                }
            });
        }

        function speakToday() {
            const waste = document.getElementById('waste-text').innerText;
            let textToSpeak = (waste === translations[currentLang].none) ? 
                              translations[currentLang].speechNone : 
                              translations[currentLang].speechPrefix + waste;

            const msg = new SpeechSynthesisUtterance(textToSpeak);
            msg.lang = currentLang === 'es' ? 'es-ES' : 'it-IT';
            msg.rate = 0.85;
            window.speechSynthesis.speak(msg);
        }
    </script>
</body>
</html>
