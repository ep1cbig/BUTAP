<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BUTAPP - Sebastian Manduca</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        body { 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            margin: 0; padding: 0; 
            overflow: hidden;
            background-color: #f3f4f6;
        }

        #intro-screen {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(90deg, #008C45 33.3%, #ffffff 33.3%, #ffffff 66.6%, #CD212A 66.6%);
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .welcome-box {
            background: white;
            padding: 2rem;
            border-radius: 30px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 85%;
            border: 1px solid #f0f0f0;
        }

        .split-button {
            display: flex;
            background: #1f2937;
            border-radius: 15px;
            overflow: hidden;
            margin-top: 20px;
            border: 2px solid #1f2937;
        }

        .split-btn-part {
            padding: 15px 25px;
            color: white;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 14px;
            transition: background 0.3s;
            cursor: pointer;
            border: none;
            background: transparent;
        }

        .split-btn-part:active { background: #374151; }
        .divider { width: 2px; background: rgba(255,255,255,0.2); height: 30px; align-self: center; }

        .theme-organico { border-top: 15px solid #8B4513 !important; } 
        .theme-carta { border-top: 15px solid #00008B !important; }    
        .theme-plastica { border-top: 15px solid #FFD700 !important; } 
        .theme-indifferenziato { border-top: 15px solid #808080 !important; } 
        .theme-vetro { border-top: 15px solid #008000 !important; }    
        .theme-none { border-top: 15px solid #e5e7eb !important; }

        .info-card { 
            width: 100%; max-width: 450px; 
            border-radius: 35px; background: white; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            overflow-y: auto; max-height: 55vh;
        }

        .btn-interact:active { transform: scale(0.95); }
        .hide-intro { transform: translateY(-100%); }
    </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen pt-6 px-4">

    <!-- PANTALLA DE PRESENTACI√ìN -->
    <div id="intro-screen">
        <div class="welcome-box">
            <h1 class="text-4xl font-black text-gray-800 mb-2">BUTAPP</h1>
            <p class="text-gray-500 font-medium italic mb-4 text-sm">Calendario 2026 - Italia</p>
            
            <div class="split-button">
                <button onclick="enterApp('es')" class="split-btn-part">Ingresar</button>
                <div class="divider"></div>
                <button onclick="enterApp('it')" class="split-btn-part">Entrare</button>
            </div>
        </div>
        
        <div class="absolute bottom-10 text-center text-gray-700">
            <p class="font-bold text-sm">Creador: Sebastian Manduca</p>
            <p class="text-[10px] uppercase tracking-widest font-black opacity-80">Copyright ¬© 2026</p>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <header class="text-center mb-4">
        <h1 class="text-5xl font-black text-green-800 tracking-tighter">BUTAPP</h1>
        <div class="inline-block bg-black text-white px-3 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest">
            Stasera si espone / Esta noche se saca
        </div>
    </header>

    <div id="main-card" class="info-card p-8 mb-4 border-t-[15px]">
        <div class="flex flex-col items-center">
            <div id="waste-icon" class="text-6xl mb-4">‚ôªÔ∏è</div>
            <h2 id="waste-text" class="text-3xl font-black text-center text-gray-800 uppercase leading-none mb-2 tracking-tighter">Cargando...</h2>
            <p id="date-text" class="text-sm font-bold text-gray-400 mb-6 uppercase tracking-tighter"></p>
        </div>

        <div id="details-container" class="space-y-4"></div>
    </div>

    <!-- Panel de Control Inferior -->
    <div class="w-full max-w-md bg-white p-5 rounded-[30px] shadow-lg border border-gray-100">
        <div class="flex items-center justify-between mb-4">
            <div>
                <p id="label-action" class="text-[10px] font-black text-gray-400 uppercase tracking-widest">Sacar esta noche:</p>
                <p id="current-day-label" class="text-lg font-bold text-gray-800">Cargando...</p>
            </div>
            <button onclick="speakToday()" class="btn-interact w-14 h-14 bg-green-700 text-white rounded-2xl flex items-center justify-center shadow-lg">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            </button>
        </div>

        <div class="flex gap-2">
            <button onclick="setLanguage('es')" id="btn-es" class="btn-interact flex-1 py-4 rounded-xl font-black text-xs border-2 transition-all">ESPA√ëOL</button>
            <button onclick="setLanguage('it')" id="btn-it" class="btn-interact flex-1 py-4 rounded-xl font-black text-xs border-2 transition-all">ITALIANO</button>
        </div>
    </div>

    <script>
        let currentLang = 'es';

        const translations = {
            es: { 
                speechPrefix: "Atenci√≥n Sebastian, esta noche recuerda sacar: ", 
                speechNone: "Atenci√≥n, esta noche no tienes que sacar nada.", 
                none: "Nada hoy",
                si: "QU√â INCLUYE üëç",
                no: "NO INCLUYE ‚ùå",
                labelAction: "Sacar esta noche:",
                and: " y "
            },
            it: { 
                speechPrefix: "Attenzione Sebastian, stasera ricordati di esporre: ", 
                speechNone: "Attenzione, stasera non devi esporre niente.", 
                none: "Niente stasera",
                si: "COSA METTERE üëç",
                no: "COSA NON METTERE ‚ùå",
                labelAction: "Esporre stasera:",
                and: " e "
            }
        };

        const themeMap = {
            "Organico": { class: "theme-organico", icon: "üü§", color: "#8B4513", voice: {es: "el org√°nico", it: "l'organico"} },
            "Carta": { class: "theme-carta", icon: "üîµ", color: "#00008B", voice: {es: "el papel y cart√≥n", it: "carta e cartone"} },
            "Plastica Metalli": { class: "theme-plastica", icon: "üü°", color: "#EAB308", voice: {es: "el pl√°stico y los metales", it: "plastica e metalli"} },
            "Secco Residuo": { class: "theme-indifferenziato", icon: "‚ö™", color: "#808080", voice: {es: "el indiferenciado", it: "l'indifferenziato"} },
            "Vetro": { class: "theme-vetro", icon: "üü¢", color: "#008000", voice: {es: "el vidrio", it: "il vetro"} },
            "Niente stasera": { class: "theme-none", icon: "üè†", color: "#9ca3af", voice: {es: "nada", it: "niente"} }
        };

        const detailsData = {
            "Organico": {
                es: { si: "Restos de comida, caf√©, flores y servilletas sucias.", no: "Pa√±ales o colillas." },
                it: { si: "Avanzi di cibo, fondi di caff√®, fiori e tovaglioli sporchi.", no: "Pannolini o mozziconi." }
            },
            "Plastica Metalli": {
                es: { si: "Botellas, latas, bolsas y bandejas de telgopor.", no: "Juguetes o envases muy sucios." },
                it: { si: "Bottiglie, lattine, sacchetti e vaschette.", no: "Giocattoli o contenitori sporchi." }
            },
            "Carta": {
                es: { si: "Cajas de cart√≥n, peri√≥dicos y Tetra Pak.", no: "Tickets o cajas de pizza con grasa." },
                it: { si: "Scatole, giornali e Tetra Pak.", no: "Scontrini o scatole di pizza unte." }
            },
            "Secco Residuo": {
                es: { si: "Tickets, pa√±ales, cepillos y cer√°mica rota.", no: "Pilas o medicinas." },
                it: { si: "Scontrini, pannolini, spazzolini e ceramica.", no: "Pile o medicine." }
            },
            "Vetro": {
                es: { si: "Botellas y frascos de vidrio sin tapas.", no: "Cristal o cer√°mica." },
                it: { si: "Bottiglie e vasetti di vetro.", no: "Cristallo o ceramica." }
            }
        };

        // CALENDARIO 2026 (Mes-D√≠a)
        const calendar = {
            "0-1": "Secco Residuo / Vetro", 
            "0-2": "Organico",
            "0-4": "Organico",
            "0-6": "Carta / Plastica Metalli",
            "0-7": "Organico",
            "0-8": "Secco Residuo / Vetro",
            "0-9": "Organico",
            "0-11": "Organico",
            "0-12": "Carta",
            "0-13": "Plastica Metalli",
            "0-14": "Organico",
            "0-15": "Secco Residuo / Vetro",
            "0-30": "Organico"
        };

        function enterApp(lang) {
            currentLang = lang;
            document.getElementById('intro-screen').classList.add('hide-intro');
            setLanguage(lang);
        }

        function setLanguage(lang) {
            currentLang = lang;
            document.getElementById('btn-es').className = `btn-interact flex-1 py-4 rounded-xl font-black border-2 transition-all ${lang === 'es' ? 'bg-green-700 text-white border-green-700' : 'bg-white text-gray-400 border-gray-100'}`;
            document.getElementById('btn-it').className = `btn-interact flex-1 py-4 rounded-xl font-black border-2 transition-all ${lang === 'it' ? 'bg-green-700 text-white border-green-700' : 'bg-white text-gray-400 border-gray-100'}`;
            updateUI();
        }

        function updateUI() {
            const now = new Date();
            // Verificamos si ya estamos en 2026 para que el calendario funcione
            const is2026 = now.getFullYear() >= 2026;
            
            let waste = translations[currentLang].none;
            
            if (is2026) {
                const key = `${now.getMonth()}-${now.getDate()}`;
                waste = calendar[key] || translations[currentLang].none;
            }
            
            const card = document.getElementById('main-card');
            const wasteText = document.getElementById('waste-text');
            const iconBox = document.getElementById('waste-icon');
            
            card.className = "info-card p-8 mb-4 border-t-[15px]";
            
            const mainType = waste.split(' / ')[0];
            const theme = themeMap[mainType] || themeMap["Niente stasera"];
            
            card.classList.add(theme.class);
            iconBox.innerText = theme.icon;
            wasteText.innerText = waste;
            wasteText.style.color = theme.color;
            
            document.getElementById('date-text').innerText = now.toLocaleDateString(currentLang === 'es' ? 'es-ES' : 'it-IT', { weekday: 'long', day: 'numeric', month: 'long' });
            document.getElementById('current-day-label').innerText = now.toLocaleDateString(currentLang === 'es' ? 'es-ES' : 'it-IT', { weekday: 'long' });
            document.getElementById('label-action').innerText = translations[currentLang].labelAction;

            renderDetails(waste);
        }

        function renderDetails(wasteType) {
            const container = document.getElementById('details-container');
            container.innerHTML = "";

            if (wasteType === translations[currentLang].none) {
                container.innerHTML = `<p class="text-center text-gray-400 font-bold py-10 uppercase tracking-widest">Nessuna esposizione / Sin sacos hoy</p>`;
                return;
            }

            const types = wasteType.split(' / ');
            types.forEach(type => {
                const data = detailsData[type] ? detailsData[type][currentLang] : null;
                if (data) {
                    container.innerHTML += `
                        <div class="bg-gray-50 p-4 rounded-2xl border border-gray-100">
                            <h4 class="font-black text-[10px] uppercase text-gray-400 mb-1">${type}</h4>
                            <p class="text-[10px] font-black text-green-600 mb-1">${translations[currentLang].si}</p>
                            <p class="text-[11px] text-gray-700 font-bold leading-tight mb-2">${data.si}</p>
                            <p class="text-[10px] font-black text-red-500 mb-1">${translations[currentLang].no}</p>
                            <p class="text-[11px] text-gray-700 font-bold leading-tight">${data.no}</p>
                        </div>
                    `;
                }
            });
        }

        function speakToday() {
            const now = new Date();
            const is2026 = now.getFullYear() >= 2026;
            let waste = "Niente stasera";
            
            if (is2026) {
                const key = `${now.getMonth()}-${now.getDate()}`;
                waste = calendar[key] || "Niente stasera";
            }
            
            let finalSentence = "";

            if (waste === "Niente stasera" || waste === translations[currentLang].none) {
                finalSentence = translations[currentLang].speechNone;
            } else {
                const types = waste.split(' / ');
                const naturalTypes = types.map(t => themeMap[t].voice[currentLang]);
                
                let wasteListText = "";
                if (naturalTypes.length === 1) {
                    wasteListText = naturalTypes[0];
                } else {
                    const last = naturalTypes.pop();
                    wasteListText = naturalTypes.join(', ') + translations[currentLang].and + last;
                }
                
                finalSentence = translations[currentLang].speechPrefix + wasteListText + ".";
            }

            const msg = new SpeechSynthesisUtterance(finalSentence);
            msg.lang = currentLang === 'es' ? 'es-ES' : 'it-IT';
            msg.rate = 0.9;
            window.speechSynthesis.speak(msg);
        }
    </script>
</body>
</html>
