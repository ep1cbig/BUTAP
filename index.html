<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BUTAPP - Sebastian Manduca</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="https://cdn-icons-png.flaticon.com/512/3299/3299935.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap');
        
        body { 
            font-family: 'Fredoka', sans-serif; 
            background: linear-gradient(180deg, #f0fdf4 0%, #dcfce7 100%);
            min-height: 100vh;
            margin: 0; padding: 0; 
        }

        .info-card { 
            width: 100%; 
            max-width: 450px; 
            border-radius: 40px; 
            background: #ffffff; 
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .waste-icon-bg {
            width: 80px; height: 80px;
            border-radius: 25px;
            display: flex; items-center; justify-content: center;
            margin: 0 auto 15px;
            font-size: 40px;
        }

        /* Animaciones */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .animate-pop { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        /* Colores din√°micos por tipo */
        .theme-organico { border-top: 12px solid #8b5e3c; }
        .theme-plastica { border-top: 12px solid #3b82f6; }
        .theme-carta { border-top: 12px solid #f59e0b; }
        .theme-vetro { border-top: 12px solid #10b981; }
        .theme-secco { border-top: 12px solid #6b7280; }
        .theme-none { border-top: 12px solid #e5e7eb; }

        .btn-interact:active { transform: scale(0.92); }
    </style>
</head>
<body class="p-4 flex flex-col items-center">

    <header class="text-center mb-6">
        <h1 class="text-5xl font-bold text-green-700 tracking-tight">BUTAPP</h1>
        <p class="text-xs text-green-600 font-semibold uppercase tracking-widest mt-1">Sebastian Manduca ‚Ä¢ Eco-Gu√≠a</p>
    </header>

    <!-- Tarjeta Principal Interactiva -->
    <div id="main-card" class="info-card p-8 animate-pop mb-6">
        <div id="waste-icon" class="waste-icon-bg shadow-inner">‚ôªÔ∏è</div>
        
        <div class="text-center mb-6">
            <h2 id="waste-text" class="text-3xl font-bold text-gray-800 leading-tight">Cargando...</h2>
            <p id="date-text" class="text-sm text-green-600 font-medium mt-1"></p>
        </div>

        <div id="details-container" class="space-y-6">
            <!-- Contenido din√°mico -->
        </div>
    </div>

    <!-- Panel de Control Inferior -->
    <div class="w-full max-w-md bg-white/80 backdrop-blur-md p-6 rounded-[35px] shadow-lg border border-white flex flex-col items-center">
        <div class="flex items-center justify-between w-full mb-4">
            <p id="label-today" class="text-gray-500 font-bold uppercase text-xs tracking-widest">Hoy toca:</p>
            <button onclick="speakToday()" class="btn-interact w-14 h-14 bg-green-600 text-white rounded-2xl flex items-center justify-center shadow-xl shadow-green-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
            </button>
        </div>

        <div class="flex gap-3 w-full">
            <button onclick="setLanguage('es')" id="btn-es" class="btn-interact flex-1 py-3 rounded-2xl font-bold transition-all border-2">ESPA√ëOL</button>
            <button onclick="setLanguage('it')" id="btn-it" class="btn-interact flex-1 py-3 rounded-2xl font-bold transition-all border-2">ITALIANO</button>
        </div>
    </div>

    <script>
        let currentLang = 'es';

        const translations = {
            es: { 
                today: "Hoy se tira:", 
                speechPrefix: "¬°Hola! Hoy te toca sacar ", 
                speechNone: "Hoy es d√≠a de descanso, no se tira nada.", 
                none: "Nada hoy",
                si: "S√ç SE TIRA üëç",
                no: "NO SE TIRA ‚ùå",
                empty: "¬°Libre! No hay recolecci√≥n hoy.",
                labelToday: "Calendario de Hoy"
            },
            it: { 
                today: "Oggi si butta:", 
                speechPrefix: "Ciao! Oggi devi buttare ", 
                speechNone: "Oggi riposo, non si butta niente.", 
                none: "Niente oggi",
                si: "COSA BUTTARE üëç",
                no: "NON BUTTARE ‚ùå",
                empty: "Libero! Niente raccolta oggi.",
                labelToday: "Calendario di Oggi"
            }
        };

        const wasteThemes = {
            "Organico": { icon: "üçé", class: "theme-organico", color: "#8b5e3c", bg: "#fdf5f0" },
            "Plastica Metalli": { icon: "ü•§", class: "theme-plastica", color: "#3b82f6", bg: "#eff6ff" },
            "Carta": { icon: "üì¶", class: "theme-carta", color: "#f59e0b", bg: "#fffbeb" },
            "Secco Residuo": { icon: "üß∏", class: "theme-secco", color: "#4b5563", bg: "#f9fafb" },
            "Vetro": { icon: "üçæ", class: "theme-vetro", color: "#10b981", bg: "#f0fdf4" },
            "Nada hoy": { icon: "üè°", class: "theme-none", color: "#9ca3af", bg: "#f3f4f6" }
        };

        const detailsData = {
            "Organico": {
                es: { si: "Restos de comida, c√°scaras, caf√©, saquitos de t√©, flores y servilletas sucias.", no: "Pa√±ales, colillas de cigarro o l√≠quidos." },
                it: { si: "Avanzi di cibo, bucce, fondi di caff√®, t√®, fiori e tovaglioli sporchi.", no: "Pannolini, mozziconi di sigaretta o liquidi." }
            },
            "Plastica Metalli": {
                es: { si: "Botellas, latas, bolsas de pl√°stico, papel aluminio y bandejas blancas.", no: "Juguetes, goma o envases con mucha comida." },
                it: { si: "Bottiglie, lattine, sacchetti, carta stagnola e vaschette bianche.", no: "Giocattoli, gomma o contenitori molto sporchi." }
            },
            "Carta": {
                es: { si: "Cajas de cart√≥n, peri√≥dicos, revistas, bolsas de papel y cajas de leche.", no: "Tickets de compra, cajas de pizza con grasa o papel mojado." },
                it: { si: "Scatole di cartone, giornali, riviste, sacchetti di carta e Tetra Pak.", no: "Scontrini, scatole di pizza unte o carta bagnata." }
            },
            "Secco Residuo": {
                es: { si: "Pa√±ales, cepillos de dientes, bol√≠grafos, colillas y espejos rotos.", no: "Pilas, bombillas o medicinas." },
                it: { si: "Pannolini, spazzolini, penne, mozziconi e specchi rotti.", no: "Pile, lampadine o medicine." }
            },
            "Vetro": {
                es: { si: "Botellas y frascos de vidrio (¬°Sin las tapas!).", no: "Copas de cristal, platos de cer√°mica o bombillas." },
                it: { si: "Bottiglie e vasetti di vetro (Senza tappi!).", no: "Cristallo, piatti di ceramica o lampadine." }
            }
        };

        const calendar = {
            "0-2": "Secco Residuo / Vetro", "0-3": "Organico", "0-5": "Organico", "0-7": "Carta / Plastica Metalli",
            "0-8": "Organico", "0-9": "Secco Residuo / Vetro", "0-10": "Organico", "0-12": "Organico",
            "0-13": "Carta", "0-14": "Plastica Metalli", "0-15": "Organico", "0-16": "Secco Residuo / Vetro",
            "0-31": "Organico"
        };

        function setLanguage(lang) {
            currentLang = lang;
            document.getElementById('btn-es').className = `btn-interact flex-1 py-3 rounded-2xl font-bold border-2 transition-all ${lang === 'es' ? 'bg-green-600 text-white border-green-600' : 'bg-white text-green-700 border-green-100'}`;
            document.getElementById('btn-it').className = `btn-interact flex-1 py-3 rounded-2xl font-bold border-2 transition-all ${lang === 'it' ? 'bg-green-600 text-white border-green-600' : 'bg-white text-green-700 border-green-100'}`;
            updateUI();
        }

        function updateUI() {
            const now = new Date();
            const key = `${now.getMonth()}-${now.getDate()}`;
            const waste = calendar[key] || translations[currentLang].none;
            
            const card = document.getElementById('main-card');
            const iconBox = document.getElementById('waste-icon');
            const wasteText = document.getElementById('waste-text');
            const detailsBox = document.getElementById('details-container');
            
            // Reset clases de tema
            card.className = "info-card p-8 animate-pop mb-6";
            
            // Aplicar Tema Visual
            const mainType = waste.split(' / ')[0];
            const theme = wasteThemes[mainType] || wasteThemes["Nada hoy"];
            card.classList.add(theme.class);
            iconBox.innerText = theme.icon;
            iconBox.style.backgroundColor = theme.bg;
            iconBox.style.color = theme.color;
            
            wasteText.innerText = waste;
            wasteText.style.color = theme.color === "#9ca3af" ? "#374151" : theme.color;
            
            document.getElementById('date-text').innerText = now.toLocaleDateString(currentLang === 'es' ? 'es-ES' : 'it-IT', { weekday: 'long', day: 'numeric', month: 'long' });
            document.getElementById('label-today').innerText = translations[currentLang].labelToday;

            renderDetails(waste);
        }

        function renderDetails(wasteType) {
            const container = document.getElementById('details-container');
            container.innerHTML = "";

            if (wasteType === translations[currentLang].none) {
                container.innerHTML = `<p class="text-center text-gray-400 font-medium py-10">${translations[currentLang].empty}</p>`;
                return;
            }

            const types = wasteType.split(' / ');
            types.forEach(type => {
                const data = detailsData[type] ? detailsData[type][currentLang] : null;
                if (data) {
                    container.innerHTML += `
                        <div class="bg-gray-50 p-5 rounded-3xl border border-gray-100">
                            <h4 class="font-bold text-gray-400 text-[10px] uppercase tracking-widest mb-3">${type}</h4>
                            <div class="flex gap-4 mb-4">
                                <div class="text-xl">‚úÖ</div>
                                <div>
                                    <p class="text-[10px] font-bold text-green-600 uppercase mb-1">${translations[currentLang].si}</p>
                                    <p class="text-sm text-gray-700 leading-tight">${data.si}</p>
                                </div>
                            </div>
                            <div class="flex gap-4">
                                <div class="text-xl">‚ùå</div>
                                <div>
                                    <p class="text-[10px] font-bold text-red-500 uppercase mb-1">${translations[currentLang].no}</p>
                                    <p class="text-sm text-gray-700 leading-tight">${data.no}</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function speakToday() {
            const waste = document.getElementById('waste-text').innerText;
            let textToSpeak = "";

            if (waste === translations[currentLang].none) {
                textToSpeak = translations[currentLang].speechNone;
            } else {
                textToSpeak = translations[currentLang].speechPrefix + waste;
            }

            const msg = new SpeechSynthesisUtterance(textToSpeak);
            msg.lang = currentLang === 'es' ? 'es-ES' : 'it-IT';
            msg.rate = 0.85; // Velocidad amigable para ancianos
            msg.pitch = 1.1; // Tono ligeramente m√°s alegre
            window.speechSynthesis.speak(msg);
        }

        window.onload = () => setLanguage('es');
    </script>
</body>
</html>
